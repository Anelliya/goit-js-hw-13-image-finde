{"version":3,"sources":["webpack:///./template.hbs","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop","pageNumber","searchQuery","inputRef","document","querySelector","galerryRef","loadMoreButtonRef","headers","imageSearch","queryInput","console","log","body","clientHeight","fetch","then","res","json","insertAdjacentHTML","createMarkUp","hits","newListItemNumber","newListItem","querySelectorAll","newListItemrect","getBoundingClientRect","window","scrollTo","top","pageYOffset","behavior","catch","error","delayedSearch","_","debounce","event","innerHTML","classList","remove","target","value","addEventListener"],"mappings":"qGAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC5G,IAAIC,EAAOL,EAAUM,OAAQC,EAAOP,EAAUQ,iBAAkBC,EAAiBT,EAAUS,gBAAkB,SAASC,EAAQC,GAC1H,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,mGACHJ,EAAOF,EAAkB,MAAVJ,EAAiBQ,EAAeR,EAAO,iBAAmBA,EAASA,IAClF,gCACAM,EAAOF,EAAkB,MAAVJ,EAAiBQ,EAAeR,EAAO,cAAgBA,EAASA,IAC/E,QACAM,EAAOF,EAAkB,MAAVJ,EAAiBQ,EAAeR,EAAO,QAAUA,EAASA,IACzE,mMACAM,EAAOF,EAAkB,MAAVJ,EAAiBQ,EAAeR,EAAO,SAAWA,EAASA,IAC1E,wHACAM,EAAOF,EAAkB,MAAVJ,EAAiBQ,EAAeR,EAAO,SAAWA,EAASA,IAC1E,kIACAM,EAAOF,EAAkB,MAAVJ,EAAiBQ,EAAeR,EAAO,YAAcA,EAASA,IAC7E,4HACAM,EAAOF,EAAkB,MAAVJ,EAAiBQ,EAAeR,EAAO,aAAeA,EAASA,IAC9E,2CACAM,EAAOF,EAAkB,MAAVJ,EAAiBQ,EAAeR,EAAO,WAAaA,EAASA,IAC5E,gHACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASD,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIY,EAON,OAA+R,OAAtRA,GAPsBhB,EAAUS,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAKWT,EAAQ,QAAQa,KAAe,MAAVd,EAAiBA,EAAUD,EAAUiB,aAAe,GAAIhB,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKD,EAAUkB,QAAQ,EAAGd,EAAM,GAAG,QAAUJ,EAAUmB,KAAK,KAAOf,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,OAAiBY,EAAS,IAC3S,KACJ,SAAU,K,qFCzBRI,EACAC,E,qBATEC,EAAWC,SAASC,cAAc,oBAClCC,EAAaF,SAASC,cAAc,mBAEpCE,GADWH,SAASC,cAAc,iBACdD,SAASC,cAAc,kBAC3CG,EACC,qCAUP,SAASC,EAAYC,EAAYT,GAC/BU,QAAQC,IAAIR,SAASS,KAAKC,cAC1BC,MAAM,sEACkEL,EADnE,SACsFT,EADrF,oBAC4HO,GAE/HQ,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAA/B,IAVV,SAAsBA,GACpBqB,EAAWa,mBAAmB,YAAavC,IAASK,IAUhDmC,CAAanC,EAAKoC,MAClB,IAAIC,EAhBK,IAgBgBrB,EAAa,GAClCsB,EAAcnB,SACfC,cAAc,YACdmB,iBAAiB,MAAMF,GACtBG,EAAkBF,EAAYG,wBAClCf,QAAQC,IAAIU,EAAmBC,EAAaE,GAC5CE,OAAOC,SAAS,CAEdC,IAAKF,OAAOG,YAAcL,EAAgBI,IAC1CE,SAAU,cAGbC,OAAM,SAAAC,GAAK,OAAItB,QAAQC,IAAIqB,MAGhC,IAAMC,EAAgBC,EAAEC,UAAS,SAAAC,GAC/B/B,EAAWgC,UAAY,GACvB/B,EAAkBgC,UAAUC,OAAO,UAC9BH,EAAMI,OAAOC,QAGlBzC,EAAa,EAEbQ,EADAP,EAAcmC,EAAMI,OAAOC,MACFzC,MACxB,KAEHE,EAASwC,iBAAiB,QAAST,GAOnC3B,EAAkBoC,iBAAiB,SALlB,WACflC,EAAYP,EAAcD,GAAc,Q","file":"main.df6ffe9412c783680cbb.js","sourcesContent":["var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\n    <div>\\n        <div class=\\\"image-container\\\">\\n            <a href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\">\\n                <img src=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"previewURL\") : depth0), depth0))\n    + \" alt=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"tags\") : depth0), depth0))\n    + \" class=\\\"image\\\" />\\n            </a>\\n        </div>\\n\\n        <div class=\\\"stats\\\">\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \" </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">visibility</i>\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">comment</i>\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \" </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\n            </p>\\n            <a href=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"pageURL\") : depth0), depth0))\n    + \" target=\\\"_blank\\\">\\n                <p>more...</p>\\n            </a>\\n\\n        </div>\\n    </div>\\n</li>\\n\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":33,\"column\":9}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"useData\":true});","import './styles.css';\nimport 'lodash';\nimport template from './template.hbs';\n\nconst inputRef = document.querySelector('[id=search-form]');\nconst galerryRef = document.querySelector('[class=gallery]');\nconst imageRef = document.querySelector('[class=image]');\nconst loadMoreButtonRef = document.querySelector('[id=js-button');\nconst headers = {\n  key: '19685928-f191ac91b9da632ea9a4b744f',\n};\nlet pageSize = 12;\nlet pageNumber;\nlet searchQuery;\n\nfunction createMarkUp(data) {\n  galerryRef.insertAdjacentHTML('beforeend', template(data));\n}\n\nfunction imageSearch(queryInput, pageNumber) {\n  console.log(document.body.clientHeight);\n  fetch(\n    `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${queryInput}&page=${pageNumber}&per_page=${pageSize}&key=${headers.key}`,\n  )\n    .then(res => res.json())\n    .then(data => {\n      createMarkUp(data.hits);\n      let newListItemNumber = (pageNumber - 1) * pageSize;\n      let newListItem = document\n        .querySelector('.gallery')\n        .querySelectorAll('li')[newListItemNumber];\n      let newListItemrect = newListItem.getBoundingClientRect();\n      console.log(newListItemNumber, newListItem, newListItemrect);\n      window.scrollTo({\n        //top: document.body.scrollHeight + inputRect.bottom,\n        top: window.pageYOffset + newListItemrect.top,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => console.log(error));\n}\n\nconst delayedSearch = _.debounce(event => {\n  galerryRef.innerHTML = '';\n  loadMoreButtonRef.classList.remove('hidden');\n  if (!event.target.value) {\n    return;\n  }\n  pageNumber = 1;\n  searchQuery = event.target.value;\n  imageSearch(searchQuery, pageNumber);\n}, 1000);\n\ninputRef.addEventListener('input', delayedSearch);\n\nconst loadMore = () => {\n  imageSearch(searchQuery, (pageNumber += 1));\n};\n\n//imageRef.addEventListener('focus', );\nloadMoreButtonRef.addEventListener('click', loadMore);\n"],"sourceRoot":""}